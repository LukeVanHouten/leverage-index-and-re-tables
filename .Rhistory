bot_9_weight_delta
inning_weights_df <- c(unname(innings_model_1$fitted.values[1:16]),
corrected_model_2_preds) %>%
as.data.frame() %>%
mutate(inning = innings_factor) %>%
`colnames<-`(c("inning_weight", "half_inning")) %>%
select(half_inning, inning_weight)
View(inning_weights_df)
rm(corrected_innings_model_2_preds)
ggplot(data = inning_weights_df, mapping = aes(x = fct_inorder(half_inning),
y = inning_weight)) +
geom_point() +
geom_path(group = 1)
complete_li_df <- left_join(linear_weights_df, all_leads_df,
by = c("play", "score_diff"))
year_li_df <- left_join(complete_li_df, mean_we_swing_df, by = "game_year") %>%
select(-mean_we_swing)
leverage_index_df <- left_join(year_li_df, inning_weights_df,
by = "half_inning") %>%
mutate(li = (li * inning_weight) / standardized_mean_we_swing) %>%
select(game_pk, game_date, batting_team, fielding_team, half_inning,
inning_pa, score, score_diff, batter, pitcher, play, re_year, li,
events, rbi, re24, delta_win_exp) %>%
mutate(li = round(li / mean(li), 4))
View(leverage_index_df)
View(year_li_df)
View(year_li_df)
View(year_li_df)
View(year_li_df)
filter(year_li_df, half_inning == "Top_10")
filter(year_li_df, half_inning == "Top_10") %>% View()
filter(year_li_df, half_inning == "Top_10", game_year > 2021) %>% View()
filter(year_li_df, half_inning == "Top_16", game_year > 2021) %>% View()
filter(year_li_df, half_inning == "Top_15", game_year > 2021) %>% View()
filter(year_li_df, half_inning == "Top_14", game_year > 2021) %>% View()
leverage_index_df <- left_join(year_li_df, inning_weights_df,
by = "half_inning")
filter(leverage_index_df, half_inning == "Top_14", game_year > 2021) %>% View()
filter(leverage_index_df, half_inning == "Top_10", game_year > 2021) %>% View()
filter(leverage_index_df, half_inning == "Top_15", game_year > 2021) %>% View()
leverage_index_df <- left_join(year_li_df, inning_weights_df,
by = "half_inning") %>%
mutate(li = (li * inning_weight) / standardized_mean_we_swing) %>%
select(game_pk, game_date, batting_team, fielding_team, half_inning,
inning_pa, score, score_diff, batter, pitcher, play, re_year, li,
events, rbi, re24, delta_win_exp) %>%
mutate(li = round(li / mean(li), 4))
View(leverage_index_df)
hist(leverage_index_df$li, breaks = 50)
hist(leverage_index_df$li, breaks = 10)
filter(leverage_index_df, game_pk == 662148) %>% View()
filter(leverage_index_df, game_pk == 661128) %>% View()
tex_sea_df <- read.csv("tex_sea_09_29_22.csv")
View(tex_sea_df)
typeof(tex_sea_df$LI)
tex_sea_df <- read.csv("tex_sea_09_29_22.csv") %>%
filter(!(PA %in% c(16, 78, 83, 90, 97)))
View(tex_sea_df)
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li"))
View(compare_li_df)
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li")) %>%
mutate(my_li = round(my_li, 2))
View(compare_li_df)
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li")) %>%
mutate(my_li = round(my_li, 2), n = row_number())
View(compare_li_df)
View(melt(compare_li_Df))
View(melt(compare_li_df))
View(reshape2::melt(compare_li_df))
View(reshape2::melt(compare_li_df, id = "n"))
plot_compare_li_df <- reshape2::melt(compare_li_df, id = "n")
View(plot_compare_li_df)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path()
View(tex_sea_df)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 80, colour = "red")
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
View(compare_li_df)
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li)
View(compare_li_deltas_df)
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li)
View(compare_li_deltas_df)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
View(compare_li_df)
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li")) %>%
mutate(my_li = round(my_li, 2), n = row_number(),
li_diff = fangraphs_li - my_li)
View(compare_li_df)
View(reshape2::melt(compare_li_df, id = "n"))
reshape2::melt(compare_li_df, id = "n") %>% group_by(n) %>% mutate(diff = first(value) - last(value)) %>% View()
reshape2::melt(compare_li_df, id = "n") %>% group_by(n) %>% arrange(n) %>% mutate(diff = first(value) - last(value)) %>% View()
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li")) %>%
mutate(my_li = round(my_li, 2), n = row_number())
View(compare_li_df)
reshape2::melt(compare_li_df, id = "n") %>% group_by(n) %>% arrange(n) %>% mutate(diff = first(value) - last(value)) %>% View()
plot_compare_li_df <- reshape2::melt(compare_li_df, id = "n") %>%
group_by(n) %>%
arrange(n) %>%
mutate(diff = first(value) - last(value))
View(plot_compare_li_df)
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li")) %>%
mutate(my_li = round(my_li, 2), n = row_number(),
li_diff = fangraphs_li - my_li)
View(compare_li_df)
reshape2::melt(compare_li_df, id = "n") %>% arrange(n) %>% View()
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li")) %>%
mutate(my_li = round(my_li, 2), n = row_number(),
li_diff = my_li - fangraphs_li)
View(compare_li_df)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = my_li_delta - fangraphs_li_delta) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li, -diff)
plot_compare_li_df <- reshape2::melt(compare_li_df, id = "n") %>%
group_by(n) %>%
arrange(n) %>%
mutate(diff = first(value) - last(value))
View(plot_compare_li_df)
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = my_li_delta - fangraphs_li_delta) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li, -diff)
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = my_li_delta - fangraphs_li_delta) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li)
View(compare_li_deltas_df)
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = round(my_li_delta - fangraphs_li_delta), 2) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li, -li_diff)
View(compare_li_deltas_df)
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = round(my_li_delta - fangraphs_li_delta, 2)) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li, -li_diff)
View(compare_li_deltas_df)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = round(my_li_delta - fangraphs_li_delta, 1)) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li, -li_diff)
View(compare_li_deltas_df)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = round(my_li_delta - fangraphs_li_delta, 2)) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li, -li_diff)
View(compare_li_deltas_df)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = round(my_li_delta - fangraphs_li_delta)) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li, -li_diff)
View(compare_li_deltas_df)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li")) %>%
mutate(my_li = round(my_li, 2), n = row_number(),
li_diff = round(my_li - fangraphs_li))
View(compare_li_df)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red")
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_vline(xintercept = 75, colour = "red") +
scale_x_continuous(breaks = 0:93) +
scale_y_continuous(breaks = -3:8)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black")
geom_vline(xintercept = 75, colour = "red") +
scale_x_continuous(breaks = 0:93) +
scale_y_continuous(breaks = -3:8)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_x_continuous(breaks = 0:93) +
scale_y_continuous(breaks = -3:8)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red")
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_x_continuous(breaks = 0:92) +
scale_y_continuous(breaks = -5:4)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_y_continuous(breaks = -5:4)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_x_continuous(breaks = 0:93) +
scale_y_continuous(breaks = -5:8)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_y_continuous(breaks = -5:8)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_x_continuous(breaks = 0:93) +
scale_y_continuous(breaks = -3:8)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_y_continuous(breaks = -5:4)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_x_continuous(breaks = 1:93) +
scale_y_continuous(breaks = -3:8)
View(inning_weights_df)
linear_weights_df %>%
filter(half_inning %in% as.vector(innings_factor)[1:17]) %>%
group_by(half_inning) %>%
summarize(inning_mdwe = mean(delta_win_exp), .groups = "drop") %>% View()
innings_df_1 <- linear_weights_df %>%
filter(half_inning %in% as.vector(innings_factor)[1:17]) %>%
group_by(half_inning) %>%
summarize(inning_mdwe = mean(delta_win_exp), .groups = "drop") %>%
mutate(inning_mdwe = -inning_mdwe)
mutate(half_inning = innings_factor[1:17],
inning_mdwe = inning_mdwe + (1 - mean(inning_mdwe)), n = 1:n())
innings_factor <- factor(unique(linear_weights_df$half_inning))
innings_df_1 <- linear_weights_df %>%
filter(half_inning %in% as.vector(innings_factor)[1:17]) %>%
group_by(half_inning) %>%
summarize(inning_mdwe = mean(delta_win_exp), .groups = "drop") %>%
mutate(inning_mdwe = -inning_mdwe) %>%
mutate(half_inning = innings_factor[1:17],
inning_mdwe = inning_mdwe + (1 - mean(inning_mdwe)), n = 1:n())
innings_model_1 <- lm(inning_mdwe ~ n, data = innings_df_1)
# summary(innings_model_1)
innings_df_2 <- linear_weights_df %>%
filter(half_inning %in% as.vector(innings_factor)[17:38]) %>%
group_by(half_inning) %>%
summarize(inning_mdwe = mean(delta_win_exp), .groups = "drop") %>%
mutate(half_inning = innings_factor[17:38],
inning_mdwe = inning_mdwe + (1 - mean(inning_mdwe)), n = 1:n())
innings_model_2 <- lm(inning_mdwe ~ n, data = innings_df_2)
# summary(innings_model_2)
bot_9_weight_delta <- innings_model_1$fitted.values[17] -
innings_model_2$fitted.values[1]
corrected_model_2_preds <- unname(innings_model_2$fitted.values[1:22]) +
bot_9_weight_delta
inning_weights_df <- c(unname(innings_model_1$fitted.values[1:16]),
corrected_model_2_preds) %>%
as.data.frame() %>%
mutate(inning = innings_factor) %>%
`colnames<-`(c("inning_weight", "half_inning")) %>%
select(half_inning, inning_weight)
View(inning_weights_df)
complete_li_df <- left_join(linear_weights_df, all_leads_df,
by = c("play", "score_diff"))
year_li_df <- left_join(complete_li_df, mean_we_swing_df, by = "game_year") %>%
select(-mean_we_swing)
leverage_index_df <- left_join(year_li_df, inning_weights_df,
by = "half_inning") %>%
mutate(li = (li * inning_weight) / standardized_mean_we_swing) %>%
select(game_pk, game_date, batting_team, fielding_team, half_inning,
inning_pa, score, score_diff, batter, pitcher, play, re_year, li,
events, rbi, re24, delta_win_exp) %>%
mutate(li = round(li / mean(li), 4))
View(leverage_index_df)
tex_sea_df <- read.csv("tex_sea_09_29_22.csv") %>%
filter(!(PA %in% c(16, 78, 83, 90, 97)))
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li")) %>%
mutate(my_li = round(my_li, 2), n = row_number(),
li_diff = round(my_li - fangraphs_li))
# View(compare_li_df)
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = round(my_li_delta - fangraphs_li_delta)) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li, -li_diff)
# View(compare_li_deltas_df)
ggplot(data = delta_win_exp_df) +
geom_line(aes(x = score_diff_num, y = mean_delta_win_exp,
group = interaction(play, events), color = events)) +
scale_x_continuous(breaks = -5:5) +
ylim(min(delta_win_exp_df$mean_delta_win_exp),
max(delta_win_exp_df$mean_delta_win_exp))
ggplot(data = all_leads_df) +
geom_line(aes(x = score_diff, y = li, color = play)) +
scale_x_continuous(breaks = -25:25) +
scale_y_continuous(breaks = 0:6)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_x_continuous(breaks = 1:93) +
scale_y_continuous(breaks = -3:8)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_y_continuous(breaks = -5:4)
innings_factor <- factor(unique(linear_weights_df$half_inning))
innings_df_1 <- linear_weights_df %>%
filter(half_inning %in% as.vector(innings_factor)[1:17]) %>%
group_by(half_inning) %>%
summarize(inning_mdwe = mean(delta_win_exp), .groups = "drop") %>%
mutate(half_inning = innings_factor[1:17],
inning_mdwe = inning_mdwe + (1 - mean(inning_mdwe)), n = 1:n())
innings_model_1 <- lm(inning_mdwe ~ n, data = innings_df_1)
# summary(innings_model_1)
innings_df_2 <- linear_weights_df %>%
filter(half_inning %in% as.vector(innings_factor)[17:38]) %>%
group_by(half_inning) %>%
summarize(inning_mdwe = mean(delta_win_exp), .groups = "drop") %>%
mutate(half_inning = innings_factor[17:38],
inning_mdwe = inning_mdwe + (1 - mean(inning_mdwe)), n = 1:n())
innings_model_2 <- lm(inning_mdwe ~ n, data = innings_df_2)
# summary(innings_model_2)
bot_9_weight_delta <- innings_model_1$fitted.values[17] -
innings_model_2$fitted.values[1]
corrected_model_2_preds <- unname(innings_model_2$fitted.values[1:22]) +
bot_9_weight_delta
inning_weights_df <- c(unname(innings_model_1$fitted.values[1:16]),
corrected_model_2_preds) %>%
as.data.frame() %>%
mutate(inning = innings_factor) %>%
`colnames<-`(c("inning_weight", "half_inning")) %>%
select(half_inning, inning_weight)
View(inning_weights_df)
complete_li_df <- left_join(linear_weights_df, all_leads_df,
by = c("play", "score_diff"))
year_li_df <- left_join(complete_li_df, mean_we_swing_df, by = "game_year") %>%
select(-mean_we_swing)
leverage_index_df <- left_join(year_li_df, inning_weights_df,
by = "half_inning") %>%
mutate(li = (li * inning_weight) / standardized_mean_we_swing) %>%
select(game_pk, game_date, batting_team, fielding_team, half_inning,
inning_pa, score, score_diff, batter, pitcher, play, re_year, li,
events, rbi, re24, delta_win_exp) %>%
mutate(li = round(li / mean(li), 4))
View(leverage_index_df)
tex_sea_df <- read.csv("tex_sea_09_29_22.csv") %>%
filter(!(PA %in% c(16, 78, 83, 90, 97)))
compare_li_df <- cbind(filter(leverage_index_df, game_pk == 661128)$li,
tex_sea_df$LI) %>%
as.data.frame() %>%
`colnames<-`(c("my_li", "fangraphs_li")) %>%
mutate(my_li = round(my_li, 2), n = row_number(),
li_diff = round(my_li - fangraphs_li))
# View(compare_li_df)
compare_li_deltas_df <- compare_li_df %>%
mutate(my_li_delta = lead(my_li) - my_li,
fangraphs_li_delta = lead(fangraphs_li) - fangraphs_li,
delta_diff = round(my_li_delta - fangraphs_li_delta)) %>%
filter(n != 93) %>%
select(-my_li, -fangraphs_li, -li_diff)
# View(compare_li_deltas_df)
ggplot(data = delta_win_exp_df) +
geom_line(aes(x = score_diff_num, y = mean_delta_win_exp,
group = interaction(play, events), color = events)) +
scale_x_continuous(breaks = -5:5) +
ylim(min(delta_win_exp_df$mean_delta_win_exp),
max(delta_win_exp_df$mean_delta_win_exp))
ggplot(data = all_leads_df) +
geom_line(aes(x = score_diff, y = li, color = play)) +
scale_x_continuous(breaks = -25:25) +
scale_y_continuous(breaks = 0:6)
ggplot(data = reshape2::melt(compare_li_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_x_continuous(breaks = 1:93) +
scale_y_continuous(breaks = -3:8)
ggplot(data = reshape2::melt(compare_li_deltas_df, id = "n"),
mapping = aes(x = n, y = value, color = variable)) +
geom_point() +
geom_path() +
geom_hline(yintercept = 0, colour = "black") +
geom_vline(xintercept = 75, colour = "red") +
scale_y_continuous(breaks = -5:4)
